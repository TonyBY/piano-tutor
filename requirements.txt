# ─── Python version ───────────────────────────────────────────────────────────
# Minimum: Python 3.8  |  Recommended: Python 3.10 or 3.11
#
# Compatibility matrix for Python 3.8:
#   numpy   1.24.x  (1.25+ requires Py≥3.9)
#   scipy   1.10.x  (1.11+ requires Py≥3.9)
#   matplotlib 3.7.x (3.8+ requires Py≥3.9)
#   music21 8.x     (9.x requires Py≥3.9)
#   Pillow  10.x    (11.x requires Py≥3.9)
#
# On Python 3.10+ you can relax these to just ">=<min>" with no upper bound.
# ─────────────────────────────────────────────────────────────────────────────

# ─── Core web framework ───────────────────────────────────────────────────────
streamlit>=1.28.0

# ─── Numerical / audio ────────────────────────────────────────────────────────
numpy>=1.22.0
scipy>=1.7.0          # 1.10.1 is latest for Py3.8; no upper bound needed
librosa>=0.10.0
soundfile>=0.12.1

# ─── Audio → MIDI transcription ───────────────────────────────────────────────
# basic-pitch is optional: install it locally for polyphonic transcription.
# It is NOT listed here because basic-pitch 0.4+ depends on tensorflow on
# Linux Python 3.11, which conflicts with Streamlit's dependencies.
# When basic-pitch is absent the app falls back to librosa pYIN (monophonic).
# To enable polyphonic mode locally: pip install basic-pitch>=0.3.0
onnxruntime>=1.13.0    # used by basic-pitch ONNX backend when installed

# ─── MIDI utilities ───────────────────────────────────────────────────────────
pretty_midi>=0.2.9

# ─── Music notation ───────────────────────────────────────────────────────────
music21>=7.1.0        # 8.x is latest for Py3.8; 9.x requires Py≥3.9

# ─── Video rendering ──────────────────────────────────────────────────────────
opencv-python-headless>=4.8.0
Pillow>=9.0.0         # 10.x still supports Py3.8; 11.x requires Py≥3.9
matplotlib>=3.5.0     # 3.7.x is latest for Py3.8; 3.8+ requires Py≥3.9

# ─── URL / YouTube download ───────────────────────────────────────────────────
yt-dlp>=2024.1.0

# ─── Sheet-music fallback (proper staff notation without system tools) ─────────
# verovio renders MusicXML → SVG with professional staff notation.
# reportlab is used by svglib for SVG→PNG; ImageMagick CLI is the other fallback.
verovio>=3.0.0
reportlab>=3.6.0

# ─── Testing ──────────────────────────────────────────────────────────────────
pytest>=7.0.0
pytest-cov>=4.0.0
